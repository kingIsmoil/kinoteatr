<!DOCTYPE html>
<html>
<head>
    <title>Оплата бронирования</title>
</head>
<body>
    <h1>Оплата бронирования</h1>
    <p>Фильм: {{ show.movie_id.title }}</p>
    <p>Время: {{ show.showing_datetime|date:"d.m.Y H:i" }}</p>
    <p>Место: {{ seat.id }}</p>
    <p>Цена: {{ seat.price }} сом</p>
    
    <form method="post">
        {% csrf_token %}
        <h3>Выберите способ оплаты:</h3>
        {{ form.payment_method }}
        
        {% if form.card %}
            <div id="card-select" style="margin-top: 20px;">
                <h3>Выберите карту:</h3>
                {{ form.card }}
                <p><a href="{% url 'add_card' %}">Добавить новую карту</a></p>
            </div>
        {% endif %}
        
        <button type="submit" style="margin-top: 20px;">Оплатить</button>
    </form>
    
    <script>
        document.querySelectorAll('input[name="payment_method"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const cardSelect = document.getElementById('card-select');
                if (cardSelect) {
                    cardSelect.style.display = this.value === 'card' ? 'block' : 'none';
                }
            });
        });
    </script>
</body>
</html>